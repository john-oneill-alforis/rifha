<!DOCTYPE html>
<html>

<head>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Veris Data</title>

    

</head>

<body>
        <div class="container">
        <div class="col-3 d-flex justify-content-left p-2">
            <h3>Veris Data</h3>
        </div>
        <header class="d-flex flex-wrap justify-content-left py-3 mb-4 border-bottom">
            <ul class="nav nav-pills">
                <li class="nav-item p-1"><a href="/" class="nav-link active" aria-current="page">Home</a></li>
                <li class="nav-item p-1"><a href="/trainingcorpus" class="nav-link active" aria-current="page">Training Corpus</a></li> 
                <li class="nav-item p-1"><a href="/search" class="nav-link active" aria-current="page">Search</a></li>   
                <li class="nav-item p-1"><a href="/verisData" class="nav-link active" aria-current="page">Veris Data</a></li>
                <li class="nav-item p-1"><a href="/debugData" class="nav-link active" aria-current="page">Debug Data</a></li>
                <li class="nav-item p-1"><a href="/verisaro" class="nav-link active" aria-current="page">Veris ARO</a></li>
                <li class="nav-item p-1"><a href="{% url 'logout' %}" class="nav-link active" aria-current="page">Logout</a></li> 
                </li>
            </ul>
        </header>

        <div class="row g-2 w-100">
            <div class="col justify-content-center p-2">

               <h3>Total Veris Incidents : {{ total_count }}</h3>
              
            </div>

          
        </div>
    
        <div class="row">
            <div class="col p-2" style="width: 200px; height: 500px">

                <canvas id="verisyearCount"></canvas>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>
                        const ctx_labelCount = document.getElementById('verisyearCount').getContext('2d');
                        const labelCount = new Chart(ctx_labelCount, {
                            type: 'line',
                            data: {
                                labels : [{% for x in year_counts %}"{{ x.year|date:'Y' }}",{% endfor %}],
                                datasets: [{
                                    label: "Veris Incidents by Year",
                                    data : [{% for x in year_counts %}{{ x.total }},{% endfor %}],
                                    
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                </script>

            </div>

            
        </div>

        <div class="row">

            <div class="col p-2" style="width: 200px; height: 500px">

                <canvas id="verisactionCount"></canvas>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>
                        const ctx_actionCount = document.getElementById('verisactionCount').getContext('2d');
                        const actionCount = new Chart(ctx_actionCount, {
                            type: 'bar',
                            data: {
                                labels : [{% for x in action_counts %}"{{ x.action }}",{% endfor %}],
                                datasets: [{
                                    label: "Veris Incidents by Action",
                                    data : [{% for x in action_counts %}{{ x.total }},{% endfor %}],
                                    
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                </script>

            </div>
            
        </div>

        

</body>

</html>